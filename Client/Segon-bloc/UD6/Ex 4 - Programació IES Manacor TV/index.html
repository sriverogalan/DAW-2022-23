<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="canals"></div>
    <script type="module">
      import { CanalService } from "./Controller/CanalService.js";

      (async () => {
        const canalService = new CanalService();
        const canals = await canalService.getCanals();
        printTable(canals, canalService);
      })();

      const printTable = async (canals, canalService) => {
        const taula = ` <table id="taulaCanals">
                            <tr>
                                <th>Nom</th>
                                <th>Descripcio</th>
                                <th>Programació completa</th>
                            </tr>
                        </table>
        `;
        document.querySelector("#canals").innerHTML = taula;
        const taulaCanals = document.querySelector("#taulaCanals");
        canals.forEach((canal) => {
          const fila = document.createElement("tr");
          fila.innerHTML = `<td>${canal.nom}</td>
                            <td>${canal.descripcio}</td> 
                            <td>
                              <table name="${canal.nom}">
                                <tr>
                                    <th>Nom del programa</th>
                                    <th>Hora d'inici</th>
                                    <th>Restricció d'edat. En cas que no n'hi hagi posar "S/C"</th>
                                </tr>
                              </table>
                            </td> 
                            `;
          taulaCanals.appendChild(fila);
        });
        taulaCanals.innerHTML += `</table>`;
      };
    </script>
  </body>
</html>
